<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLAR LUXE | Ingeniería Solar de Alto Nivel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #C5A059;
            --dark: #0A0A0A;
            --light: #F9F9F9;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--dark);
            color: var(--light);
            scroll-behavior: smooth;
        }

        h1, h2, h3, .logo-text {
            font-family: 'Playfair Display', serif;
        }

        .glass-header {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .gold-accent {
            color: var(--gold);
        }

        .bg-gold {
            background-color: var(--gold);
        }

        .hero-gradient {
            background: linear-gradient(to bottom, rgba(10,10,10,0.4), rgba(10,10,10,1)), 
                        url('https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?auto=format&fit=crop&q=80&w=2070');
            background-size: cover;
            background-position: center;
        }

        .btn-luxury {
            border: 1px solid var(--gold);
            padding: 0.75rem 2rem;
            transition: all 0.4s ease;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .btn-luxury:hover {
            background-color: var(--gold);
            color: var(--dark);
        }

        .ai-chat-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 100;
        }

        .chat-window {
            width: 350px;
            height: 450px;
            background: #111;
            border: 1px solid var(--gold);
            display: none;
            flex-direction: column;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
            font-size: 0.9rem;
        }

        .chat-input {
            border-top: 1px solid #333;
            padding: 10px;
            display: flex;
        }

        .chat-input input {
            background: transparent;
            color: white;
            border: none;
            flex-grow: 1;
            padding: 5px;
            outline: none;
        }

        .loading-dots:after {
            content: ' .';
            animation: dots 1s steps(5, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: ' .'; }
            40% { content: ' ..'; }
            60% { content: ' ...'; }
            80%, 100% { content: ''; }
        }

        section { padding: 100px 0; }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="fixed w-full z-50 glass-header">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <svg width="40" height="40" viewBox="0 0 100 100" fill="none">
                    <circle cx="50" cy="50" r="48" stroke="#C5A059" stroke-width="2"/>
                    <circle cx="50" cy="50" r="10" fill="#C5A059"/>
                </svg>
                <span class="logo-text text-2xl tracking-widest font-bold">SOLAR<span class="gold-accent">LUXE</span></span>
            </div>
            <nav class="hidden md:flex space-x-8 text-sm uppercase tracking-widest">
                <a href="#proyectos" class="hover:text-[#C5A059] transition">Portafolio</a>
                <a href="#ia-tools" class="hover:text-[#C5A059] transition">Consultoría ✨</a>
                <a href="#contacto" class="hover:text-[#C5A059] transition">Contacto</a>
            </nav>
            <a href="#contacto" class="btn-luxury hidden md:block">Auditoría</a>
        </div>
    </header>

    <!-- Hero -->
    <section class="h-screen flex items-center hero-gradient">
        <div class="container mx-auto px-6">
            <div class="max-w-3xl">
                <h4 class="gold-accent uppercase tracking-[0.4em] mb-4 text-sm">Energía de Vanguardia</h4>
                <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight">Energía Solar <br> sin compromisos.</h1>
                <p class="text-gray-400 text-lg md:text-xl mb-10 font-light">
                    Sistemas fotovoltaicos de élite diseñados para las arquitecturas más exigentes del mundo.
                </p>
                <a href="#ia-tools" class="btn-luxury bg-gold text-black border-none">Análisis con IA ✨</a>
            </div>
        </div>
    </section>

    <!-- AI Features Section -->
    <section id="ia-tools" class="bg-white text-black">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl mb-6">Herramientas Inteligentes ✨</h2>
                <p class="text-gray-500 max-w-2xl mx-auto">Utilice nuestra inteligencia artificial avanzada para conceptualizar su proyecto energético en segundos.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <!-- AI Feature 1: Report Generator -->
                <div class="bg-gray-50 p-8 rounded-lg border border-gray-100">
                    <h3 class="text-2xl mb-4">Generador de Impacto</h3>
                    <p class="text-gray-600 mb-6">Describa su propiedad y reciba un análisis preliminar de integración y beneficios.</p>
                    <textarea id="propertyDesc" class="w-full p-4 border border-gray-200 rounded mb-4 focus:outline-none focus:border-[#C5A059]" rows="4" placeholder="Ej: Mansión de 3 plantas en la costa, estilo minimalista, tejado plano..."></textarea>
                    <button onclick="generateReport()" id="reportBtn" class="btn-luxury bg-black text-white w-full">Generar Reporte ✨</button>
                    <div id="reportOutput" class="mt-6 text-sm leading-relaxed text-gray-700 hidden italic bg-white p-4 border-l-4 border-[#C5A059]"></div>
                </div>

                <!-- AI Feature 2: Voice/Text Synthesis -->
                <div class="bg-gray-50 p-8 rounded-lg border border-gray-100">
                    <h3 class="text-2xl mb-4">Filosofía Solar Luxe</h3>
                    <p class="text-gray-600 mb-6">Escuche nuestra visión sobre el futuro de la energía en una voz de alta fidelidad.</p>
                    <button onclick="playVision()" id="voiceBtn" class="btn-luxury border-black hover:bg-black hover:text-white w-full flex items-center justify-center gap-2">
                        <span>Escuchar Manifiesto ✨</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <p class="text-[10px] uppercase text-gray-400 mt-4 tracking-widest text-center italic">Tecnología de Audio por Gemini TTS</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Chat Bot Floating -->
    <div class="ai-chat-container">
        <div class="chat-window rounded-t-lg overflow-hidden" id="chatWindow">
            <div class="bg-gold p-4 text-black font-bold flex justify-between items-center">
                <span>Concierge Solar ✨</span>
                <button onclick="toggleChat()">✕</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="mb-2 text-gray-400 italic">Bienvenido a Solar Luxe. Soy su consultor virtual. ¿En qué puedo asistirle hoy?</div>
            </div>
            <div class="chat-input">
                <input type="text" id="userInput" placeholder="Escriba su consulta..." onkeypress="if(event.key === 'Enter') sendMessage()">
                <button onclick="sendMessage()" class="gold-accent px-2">ENVIAR</button>
            </div>
        </div>
        <button onclick="toggleChat()" class="bg-gold w-16 h-16 rounded-full flex items-center justify-center shadow-2xl hover:scale-110 transition">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="black"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        </button>
    </div>

    <!-- Footer -->
    <footer class="bg-black py-10 border-t border-white/5 text-center text-xs text-gray-600 tracking-widest uppercase">
        &copy; 2026 SOLAR LUXE GLOBAL | ARTIFICIAL INTELLIGENCE INTEGRATED
    </footer>

    <script>
        const apiKey = ""; // La clave se inyecta en el entorno
        const modelId = "gemini-2.5-flash-preview-09-2025";

        // Funciones de utilidad para API con Exponential Backoff
        async function callGemini(prompt, systemInstruction = "") {
            let delay = 1000;
            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${modelId}:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }],
                            systemInstruction: { parts: [{ text: systemInstruction }] }
                        })
                    });
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text;
                } catch (e) {
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            }
            throw new Error("No se pudo conectar con el servicio de IA.");
        }

        // --- FEATURE 1: GENERADOR DE REPORTE ---
        async function generateReport() {
            const desc = document.getElementById('propertyDesc').value;
            const output = document.getElementById('reportOutput');
            const btn = document.getElementById('reportBtn');

            if (!desc) return;

            btn.disabled = true;
            btn.innerText = "ANALIZANDO PROPIEDAD...";
            output.classList.remove('hidden');
            output.innerHTML = "<span class='loading-dots'>Evaluando arquitectura</span>";

            try {
                const prompt = `Actúa como un arquitecto experto en energía solar. Genera un breve reporte ejecutivo (máximo 4 párrafos) para la siguiente descripción de propiedad: "${desc}". Habla sobre la viabilidad estética, el tipo de paneles recomendados (bifaciales o All-Black) y el impacto ambiental estimado de forma elegante.`;
                const result = await callGemini(prompt, "Eres un consultor de lujo para Solar Luxe.");
                output.innerText = result;
            } catch (err) {
                output.innerText = "Error: " + err.message;
            } finally {
                btn.disabled = false;
                btn.innerText = "GENERAR REPORTE ✨";
            }
        }

        // --- FEATURE 2: MANIFIESTO EN VOZ (TTS) ---
        async function playVision() {
            const btn = document.getElementById('voiceBtn');
            btn.disabled = true;
            btn.innerText = "SINTETIZANDO VOZ...";

            try {
                const prompt = "Say in a sophisticated, calm Spanish tone: En Solar Luxe, no instalamos paneles; esculpimos el futuro. Creemos que la independencia energética es el máximo lujo de nuestra era. Nuestra ingeniería trasciende la utilidad para convertirse en una obra de arte que respeta el planeta y su legado.";
                
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: { 
                            responseModalities: ["AUDIO"],
                            speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Puck" } } } 
                        }
                    })
                });

                const data = await response.json();
                const pcmData = data.candidates[0].content.parts[0].inlineData.data;
                
                const audioBlob = b64ToWav(pcmData, 24000); 
                const audio = new Audio(URL.createObjectURL(audioBlob));
                audio.play();
            } catch (err) {
                console.error(err);
            } finally {
                btn.disabled = false;
                btn.innerText = "ESCUCHAR MANIFIESTO ✨";
            }
        }

        // --- FEATURE 3: CONCIERGE CHAT ---
        function toggleChat() {
            const win = document.getElementById('chatWindow');
            win.style.display = win.style.display === 'flex' ? 'none' : 'flex';
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const messages = document.getElementById('chatMessages');
            const text = input.value;
            if (!text) return;

            messages.innerHTML += `<div class="mb-2 text-right text-white"><b>Usted:</b> ${text}</div>`;
            input.value = "";
            
            const loadingMsg = document.createElement('div');
            loadingMsg.className = "mb-2 gold-accent";
            loadingMsg.innerHTML = "<b>Concierge:</b> <span class='loading-dots'>Pensando</span>";
            messages.appendChild(loadingMsg);
            messages.scrollTop = messages.scrollHeight;

            try {
                const sys = "Eres el Concierge de Solar Luxe, una empresa de paneles solares de ultra-lujo. Eres extremadamente educado, sofisticado y servicial. Respondes dudas técnicas de forma sencilla pero profesional.";
                const reply = await callGemini(text, sys);
                loadingMsg.innerHTML = `<b>Concierge ✨:</b> ${reply}`;
            } catch (e) {
                loadingMsg.innerText = "Disculpe, tengo problemas de conexión.";
            }
            messages.scrollTop = messages.scrollHeight;
        }

        function b64ToWav(b64Data, sampleRate) {
            const byteCharacters = atob(b64Data);
            const byteNumbers = new Array(byteCharacters.length);
            for (let i = 0; i < byteCharacters.length; i++) {
                byteNumbers[i] = byteCharacters.charCodeAt(i);
            }
            const buffer = new Uint8Array(byteNumbers).buffer;
            const view = new DataView(buffer);
            const wavBuffer = new ArrayBuffer(44 + buffer.byteLength);
            const wavView = new DataView(wavBuffer);
            const writeString = (view, offset, string) => {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            };
            writeString(wavView, 0, 'RIFF');
            wavView.setUint32(4, 36 + buffer.byteLength, true);
            writeString(wavView, 8, 'WAVE');
            writeString(wavView, 12, 'fmt ');
            wavView.setUint32(16, 16, true);
            wavView.setUint16(20, 1, true);
            wavView.setUint16(22, 1, true);
            wavView.setUint32(24, sampleRate, true);
            wavView.setUint32(28, sampleRate * 2, true);
            wavView.setUint16(32, 2, true);
            wavView.setUint16(34, 16, true);
            writeString(wavView, 36, 'data');
            wavView.setUint32(40, buffer.byteLength, true);
            for (let i = 0; i < buffer.byteLength; i++) {
                wavView.setUint8(44 + i, view.getUint8(i));
            }
            return new Blob([wavView], { type: 'audio/wav' });
        }
    </script>
</body>

    <script src="https://cdn.botpress.cloud/webchat/v3.6/inject.js"></script>
    <script src="https://files.bpcontent.cloud/2026/02/16/23/20260216234326-LZPKG280.js" defer></script>
    
</html>
